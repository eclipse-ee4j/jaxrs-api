[appendix]
[[change-log]]
== Change Log

[[changes-since-2.1-public-review]]
=== Changes Since 2.1 Public Review

* <<sse_pipeline>>: New section describing the SSE processing
pipeline.
* <<sub_resources>>: Allow sub-resource locators to return classes
as well.
* <<executor_services>>: Removed defaults for all environments not
supporting the Java Concurrenty Utilities for Java EE API.
* <<jsonp>>: Support for `JsonValue` and all its sub-types.
* <<jsonb>>: New section for JSON-B support.
* <<completionstage>>: New section for `CompletionStage<T>` as
return type in a resource method.
* <<provider_priorities>>: New section introducing support for
`@Priority` for all providers.
* <<entity_providers>>: Modified algorithm steps to add support
for `@Priority` in selection of message body readers and writers.

[[changes-since-2.1-early-draft]]
=== Changes Since 2.1 Early Draft

* Chapter <<sse>>: API changes and removal of Flow API references.
* <<resource_method>>: Added `@PATCH` to list of supported HTTP
methods.
* <<executor_services>>: New section about executor services.
* <<rdconfig>>: Use of `ServiceLoader` in first step of algorithm.

[[changes-since-2.0-final-release]]
=== Changes Since 2.0 Final Release

* <<resource_field>>: Clarified exception handling for all 5 steps
used to convert a string to a Param. Allowed the combination of
`List<T>`, `Set<T>`, or `SortedSet<T>` and `ParamConverter`.
* <<request_matching>>: Defined client and server media types.
* <<reactive_clients>>: New section introducing support for
reactive clients.
* <<sse>>: New chapter describing the Server-Sent Events API.

[[changes-since-2.0-proposed-final-draft]]
=== Changes Since 2.0 Proposed Final Draft

* <<message_body_reader>> and <<message_body_writer>>: Updated last
logical step separating client and server runtimes.
* <<standard_entity_providers>>: New exception
`NoContentException` to handle zero-length entities.
* <<exceptions_providers>> and
<<exceptions_filters_and_interceptors>>: New subsections to separate
client and server processing of exceptions.
* <<configurable_types>>: `Invocation` and
`Invocation.Builder` are no longer configurable types.
* <<filters_interceptors_client>>: Updated samples based on
changes to Client API.
* <<default_validation_mode>>: Updated section based on changes to
Bean Validation API.
* <<validation_and_error_reporting>>: Minor re-wording of Phase 2.
* <<timeouts_and_callbacks>>: Improved example to return a
response if a timeout expires.
* <<client_api_async>>: Updated samples based on changes to Client
API.
* <<contexttypes>>: Clarified server vs. client injectable types.
* <<configuration_injection>>: New section about injection of
`Configuration` instances.
* <<bv_support>>: New section stating that support for resource
validation is required only in a product that supports Bean Validation.

[[changes-since-2.0-public-review-draft]]
=== Changes Since 2.0 Public Review Draft

* In Javadocs: Method `getSize` in class `MessageBodyWriter` is
deprecated.
* Chapter <<resources>> and <<providers>>: Replaced
`WebApplicationException` by corresponding subclass depending on HTTP
status code.
* <<resource_field>>: New step for `ParamConverter`.
* <<standard_entity_providers>>: Special case for zero-length
entities and primitive types.
* Chapter <<client_api>>: Updated samples and text related to the
configuration of Client API types. Method `configuration` has been
removed in favor of the `Configurable` interface.
* Chapter <<client_api>>: `ClientFactory` renamed to `ClientBuilder`.
* Chapter <<client_api>>: Dropped support for `@Uri` annotation.
* <<entity_interceptors>>: New paragraph clarifying that entity
interceptors are not called if a `readFrom` or `writeTo` method is
called directly from application code.
* <<entity_interceptors>>: Improved `GzipInterceptor` sample.
* <<Name_Binding>>: Clarified name binding with multiple
annotations. Made semantics compatible with CDI interceptor binding.
Name binding with `Application` subclasses.
* <<priorities>>: Annotation `@BindingPriority` replaced by common
annotation `@Priority`.
* <<exceptions_filters_and_interceptors>>: Clarified processing of
a response mapped from an exception.
* <<server_api>>: Updated samples in this section. New citation
for JSR 236.
* <<timeouts_and_callbacks>>: Improved example.
* <<client_api_async>>: Fixed signature of method `failed` in
samples.
* <<default_validation_mode>>: New section about default
validation and `@ValidateExecutable`.
* <<validation_and_error_reporting>>: Restored validation phases.
* <<jsonp>>: New section about integration with JSON-P.

[[changes-since-2.0-early-draft-third-edition]]
=== Changes Since 2.0 Early Draft (Third Edition)

* Chapter ``Validation'': Removed from PR. JAX-RS 2.0 will defer to CDI
for Bean Validation. Only those resource classes that are CDI beans
would be validated.
* <<method_exc>>: Clarified that the steps must be followed in
order and that throwables are propagated to the underlying container
only if they cannot be mapped.
* <<resource_method>>: Added `@OPTIONS` to list.
* <<resource_method_return>>: New note about anonymous inner
classes.
* <<request_matching>>: Allow multiple root resource classes to
share same URI in algorithm. Note changes in output and input of steps 1
and 2, respectively.
* <<message_body_writer>>: Throw new exception
`InternalServerErrorException`.
* <<entity_providers>>: Removed steps that required the use of the
JavaBeans Activation Framework<<bib20>> to map objects to
representations and vice-versa. The EG deemed this feature to be
confusing and not portable across implementations.
* <<standard_entity_providers>>: Support for pre-packaged readers
and writers for Java types `java.lang.Boolean`, `java.lang.Character`,
`java.lang.Number` and media type `text/plain`.
* <<standard_entity_providers>>: Detailed behavior for readers and
zero-length request entities.
* <<dynamic_binding>>: `DynamicBinder` replaced by
`DynamicFeature`.
* <<exceptions_filters_and_interceptors>>: Clarified processing of
responses mapped using exception mappers.
* Chapter <<asynchronous_processing>>: Updated sections related to the
Server API. `@Suspended` annotation, timeouts and callbacks.
* <<timeouts_and_callbacks>>: Throw new exception
`ServiceUnavailableException`.
* <<resource_context>>: New section for `ResourceContext`.
* <<ejbs>>: Clarified location of annotations in accordance to the
JAX-RS annotation inheritance rules.
* <<filters_and_interceptors>>: Replaced `@PostMatching` by
`@PreMatching`. Post-matching is now the default.
* <<annotation_table>>: Edited section on JAX-RS 2.0 annotations.

[[changes-since-2.0-early-draft-second-edition]]
=== Changes Since 2.0 Early Draft (Second Edition)

* <<uritemplates>>: New example showing a scenario in which a
`@PathParam` is not be available for injection.
* <<request_matching>>: Formalization of certain parts of the
matching algorithm that were vague. Defined formal ordering between
media types and highlighted situations in which implementations should
report a warning if the matching is ambiguous.
* <<request_matching>>: New sample showing the resource matching
algorithm in action.
* <<template_to_regex>>: New footnote about syntax of regular
expression.
* Chapter <<providers>>: The annotation `@Provider` is now only required
for automatic discovery of providers (typically via class scanning). It
is no longer required for a provider that is manually registered in
classes such as `Application` or `Configuration`.
* <<automatic_discovery>>: New section about automatic discovery
of provider classes. Only those annotated with `@Provider` must be
discovered automatically.
* Chapter <<client_api>>: Features are now providers and can be registered
as such. A feature can no longer be disabled.
* Chapter <<client_api>>: Class `Target` renamed to `WebTarget`. Removed
text describing how to use a builder factory class (no longer
supported). A few other minor updates and typos fixed.
* Chapter <<filters_and_interceptors>>: Extension points for filters
revised. New filter interfaces `ClientRequestFilter` and
`ClientResponseFilter` in Client API and new filter interfaces
`ContainerRequestFilter` and `ContainerResponseFilter` in Server API.
Corresponding context classes also updated in chapter. A
`ContainerRequestFilter` is executed before resource matching unless
annotated with `@PostMatching`. It is no longer possible to share a
filter implementation between the Client and Server APIs; entity
interceptors are still shareable.
* Chapter <<filters_and_interceptors>>: Section on the relationship
between filters and entity interceptors (including diagram) dropped.
* <<global_binding>>: Clarified global binding in relation to the
new semantics of `@Provider` for automatic discovery.
* <<dynamic_binding>>: The `DynamicBinding` interface, intended to
be implemented by filters and entity interceptors, is replaced by
`DynamicBinder`. A dynamic binder is a new type of provider that binds
filters and entity interceptors with resource methods.
* Chapter ``Validation'': Use media type names instead of Java constants
for clarity. More descriptive names for constraint annotations. Changed
inheritance rules for constraint annotations to follow those defined in
<<bib16>>. New note about `@Valid` support for return values. Fixed
phase number typo.
* <<timeouts_and_callbacks>>: New sentence about calling `suspend`
more than once or in a method annotated with `@Suspend`.
* <<async_ejbs>>: New section about EJB resource classes with
methods annotated with `@Asynchronous`.
* Chapter <<environment>>: Re-structured chapter with sub-sections for
each of the EE technologies with which JAX-RS integrates. New examples
added.

[[changes-since-2.0-early-draft]]
=== Changes Since 2.0 Early Draft

* <<expert_group>>: Updated 2.0 expert group member list.
* <<acks>>: Updated acknowledgements for 2.0 version.
* <<exceptions_providers>>: New section that describes exception
handling for all providers. Related changes to reference this new
section.
* <<exceptions_filters_and_interceptors>>: New section for filter
and interceptor exceptions. Related changes to reference this new
section.
* <<request_matching>>: Updated step 2a so that it only goes to
step 3 when latexmath:[$M \neq \{\}$].
* <<request_matching>>: New sentence about the use of a server
quality parameter (qs-value) during request matching.
* Chapter <<filters_and_interceptors>>: New extension point for pre-match
filters that are executed before resource matching.
* Chapter <<filters_and_interceptors>>: Filter methods no longer return a
next action; the execution of a request filter chain is stopped by
setting a response in the associated context.
* Chapter <<filters_and_interceptors>>: Handlers renamed to entity
interceptors for clarity (in this log included).
* Section <<global_binding>>: Global binding is now the default for
filters and entity interceptors. The annotation `@GlobalBinding` has
been dropped.
* Section <<priorities>>: Clarified reverse ordering of the response
filter chain based on binding priorities.
* Appendix C: Removed from this version after changes to Chapter
<<filters_and_interceptors>>.
* Chapter ``Validation'': Moved to an instantiate-then-validate strategy
in which validation of constructor parameters and setters is no longer
supported. Simplified validation process to better align with Bean
Validation 1.1 <<bib16>>. In particular, validation of resource
classes, fields and property getters are all carried out in a single
step.

[[changes-since-1.1-release]]
=== Changes Since 1.1 Release

* <<status>>: Updated URLs to JSR pages, etc.
* <<non_goals>>: Removed Client APIs as non-goal.
* <<terminology>>: Added new terminology.
* <<expert_group>>: List 2.0 expert group members.
* <<acks>>: acknowledgements for 2.0 version.
* Chapter <<applications>>: Somewhat generic section on validation removed
to avoid confusion with the type of validation defined in Chapter
"Validation".
* <<servlet>>: Clarified used of Servlet 3 framework pluggability.
Added sample web.xml files and a table summarizing all cases.
* <<entity_parameters>>: Clarified notion of entity parameter as a
parameter not annotated with any JAX-RS annotation.
* <<declaring_method_capabilities>>: Explained use of quality
factor q. Introduced server-side quality factor qs and included example.
* <<annotationinheritance>>: Added sentence about conflicting
annotations and recommendation to repeat annotations for consistency
with other Java EE specifications.
* <<reqpreproc>>: Highlighted input and output for each step in
algorithm. Minor edits to simplify presentation.
* <<determine_response_type>>: Updated algorithm to support
server-side quality factor qs.
* <<client_api>>: New chapter Client API.
* <<filters_and_interceptors>>: New chapter Filters and
Interceptors.
* Chapter "Validation": New chapter Validation.
* Chapter <<asynchronous_processing>>: New chapter Asynchronous
Processing.
* Appendix <<annotation_table>>: New section for 2.0 annotations.
* Appendix C: New appendix describing filter and interceptor extension
points.

[[changes-since-1.0-release]]
=== Changes Since 1.0 Release

* <<servlet>>: New requirements for Servlet 3 containers.
* <<javaee>>: Requirements for Java EE 6 containers.
* <<standard_entity_providers>>: Requirements on standard entity
providers when presented with an empty message entity.
* <<message_body_writer>>: Add closeness of generic type as
secondary sort key.
* <<message_body_reader>>: Default to application/octet-stream if
a request does not contain a content-type header.
* <<resource_field>>: Add support for static fromString method.
* <<annotationinheritance>>: Clarify annotation inheritance.
* <<security_context>>: Fix typo.
* <<servlet_container>>: Additional considerations related to
filters consuming request bodies.

[[changes-since-proposed-final-draft]]
=== Changes Since Proposed Final Draft

* <<request_matching>>: Additional sort criteria so that templates
with explicit regexs are sorted ahead of those with the default.
* <<request_matching>>, <<determine_response_type>>,
<<declaring_provider_capabilities>> and <<context_media_type>>: Q-values not
used in `@Consumes` or `@Produces`.
* <<message_body_writer>>: Fixed algorithm to refer to
<<determine_response_type>> instead of restating it. Fixed status code
returned when the media type has been determined but an appropriate
message body writer cannot be located.
* Chapter <<runtimedelegate>>: Clarify that an implementation can supply
an alternate `RuntimeDelegate` API class.

[[changes-since-public-review-draft]]
=== Changes Since Public Review Draft

* <<applications>>: Renamed ApplicationConfig class to
Application.
* Chapter <<resources>>: UriBuilder reworked to always encode components.
* <<resource_class_constructor>> and
<<provider_class_constructor>>: Added requirement to warn when choice of
constructor is ambiguous.
* <<resource_field>>: `FormParam` no longer required to be
supported on fields or properties.
* <<resource_method_return>>: Added text describing how to
determine raw and generic types from method return type and returned
instance.
* <<uritemplates>>: Template parameters can specify the regular
expression that forms their capturing group.
* <<reqpreproc>>: Make pre-processed URIs available rather than
original request URI. Added URI normalization.
* <<reqpreproc>>: Removed URI-based content negotiation.
* <<request_matching>>: Reorganized the request matching algorithm
to remove redundancy and improve readability, no functional change.
* <<template_to_regex>>: Changes to regular expressions to
eliminate edge cases.
* <<entity_providers>>: Added requirement to use JavaBean
Activation Framework when no entity provider can be found.
* <<standard_entity_providers>>: Require standard JAXB entity
providers to use application-supplied JAXB contexts in preference to
their own.
* <<contextprovider>>: Added support for specifying media type
capabilities of context providers.
* <<contexttypes>>: Removed `ContextResolver` from list of
injectable resources.
* <<providercontext>>: Changed name to Providers, removed entity
provider-specific text to reflect more generic capabilities.
* <<headersupport>>: New appendix describing where particular HTTP
headers are supported.
